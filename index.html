<!DOCTYPE html>
<meta charset="UTF-8">
<main>
    <div>
        <h2 href="/">Home</h2>
    </div>
    <div class="intro">
        <h1>Covid Stats</h1>
        <p>Web Application for Tracking Covid Related Statistics Worldwide and by Country.</p>
    </div>
    <div>
        <label>Choose Historical Date:
            <input name="chosen-date" type="date" id="chosen-date" value={{.ChosenDate}}>
        </label>
    </div>
    <div>
        <label for="chosen-country">Choose a country:</label>
        <select name="country" id="chosen-country">
            <option value={{.}}>All</option>
            {{ range.Results.Countries }}
            <option  value={{.}}>{{ . }}</option>
            {{ end }}
        </select>
    </div>
    <div class="Stats Selection">
        <form id="live-stats" onclick="myFunction2()" method="post">
            <input type="submit" value="Live Stats"  />
        </form>
        <form id="historical-stats" onclick="myFunction()" method="post">
            <input type="submit" value="Historical Stats"  />
        </form>
    </div>
</main>

<script>
    function myFunction() {
        var e = document.getElementById("chosen-country");
        var country = e.options[e.selectedIndex].text
        var date = document.getElementById("chosen-date").value;
        document.getElementById("historical-stats").setAttribute(`action` , `searchHistorical?country=${country}&date=${date}`)
    }
    function myFunction2() {
        var e = document.getElementById("chosen-country");
        var text = e.options[e.selectedIndex].text
        document.getElementById("live-stats").setAttribute('action' , `/searchLive?country=${text}`)
    }
</script>